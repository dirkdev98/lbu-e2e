// Generated by @lbu/code-gen
/* eslint-disable no-unused-vars */

import { todoMocks, unimplementedMocks, lbuMocks } from "./mocks.js";

let _internalClient = undefined;
let requestId = undefined;

function checkApiClient() {
  if (_internalClient === undefined) {
    throw new Error("Initialize api client with createApiClient");
  }
}

/**
 * Should set an axios compatible api client
 * @param {AxiosInstance} instance
 */
export function createApiClient(instance) {
  _internalClient = instance;
  _internalClient.interceptors.request.use((config) => {
    if (requestId) {
      config.headers["x-request-id"] = requestId;
    }
    return config;
  });
  _internalClient.interceptors.response.use(
    (response) => {
      if (response.headers["x-request-id"]) {
        requestId = response.headers["x-request-id"];
      }
      return response;
    },
    (error) => {
      if (error.response && error.response.headers["x-request-id"]) {
        requestId = error.response.headers["x-request-id"];
      }
      return Promise.reject(error);
    },
  );
}

export const todoApi = {
  /**
   * TodoAll
   * Tags:
   * Docs:
   * @returns {Promise.<TodoAllResponse>}
   */
  all: async function () {
    checkApiClient();
    try {
      const response = await _internalClient.request({
        url: `todo/`,
        method: "get",
        params: {},
        data: {},
      });
      return response.data;
    } catch (e) {
      if (e.response && e.response.status === 405) {
        return todoMocks.allResponse();
      }
      throw e;
    }
  },

  /**
   * TodoOne
   * Tags:
   * Docs:
   * @param { TodoNameParam_Input} params
   * @returns {Promise.<TodoListResponse>}
   */
  one: async function (params) {
    checkApiClient();
    try {
      const response = await _internalClient.request({
        url: `todo/${params.name}`,
        method: "get",
        params: {},
        data: {},
      });
      return response.data;
    } catch (e) {
      if (e.response && e.response.status === 405) {
        return todoMocks.listResponse();
      }
      throw e;
    }
  },

  /**
   * TodoNew
   * Tags:
   * Docs:
   * @param { TodoNewBody_Input} body
   * @returns {Promise.<TodoListResponse>}
   */
  new: async function (body) {
    checkApiClient();
    try {
      const response = await _internalClient.request({
        url: `todo/`,
        method: "post",
        params: {},
        data: body,
      });
      return response.data;
    } catch (e) {
      if (e.response && e.response.status === 405) {
        return todoMocks.listResponse();
      }
      throw e;
    }
  },

  /**
   * TodoCreateItem
   * Tags:
   * Docs:
   * @param { TodoNameParam_Input} params
   * @param { TodoCreateItemBody_Input} body
   * @returns {Promise.<TodoListResponse>}
   */
  createItem: async function (params, body) {
    checkApiClient();
    try {
      const response = await _internalClient.request({
        url: `todo/${params.name}/item/`,
        method: "post",
        params: {},
        data: body,
      });
      return response.data;
    } catch (e) {
      if (e.response && e.response.status === 405) {
        return todoMocks.listResponse();
      }
      throw e;
    }
  },

  /**
   * TodoToggleItem
   * Tags:
   * Docs:
   * @param { TodoNameParam_Input} params
   * @param { TodoToggleItemBody_Input} body
   * @returns {Promise.<TodoListResponse>}
   */
  toggleItem: async function (params, body) {
    checkApiClient();
    try {
      const response = await _internalClient.request({
        url: `todo/${params.name}/item/toggle`,
        method: "post",
        params: {},
        data: body,
      });
      return response.data;
    } catch (e) {
      if (e.response && e.response.status === 405) {
        return todoMocks.listResponse();
      }
      throw e;
    }
  },

  /**
   * TodoDelete
   * Tags:
   * Docs:
   * @param { TodoNameParam_Input} params
   * @returns {Promise.<TodoDeleteResponse>}
   */
  delete: async function (params) {
    checkApiClient();
    try {
      const response = await _internalClient.request({
        url: `todo/${params.name}`,
        method: "delete",
        params: {},
        data: {},
      });
      return response.data;
    } catch (e) {
      if (e.response && e.response.status === 405) {
        return todoMocks.deleteResponse();
      }
      throw e;
    }
  },
};

export const unimplementedApi = {
  /**
   * UnimplementedGetUser
   * Tags:
   * Docs:
   * @returns {Promise.<UnimplementedUser>}
   */
  getUser: async function () {
    checkApiClient();
    try {
      const response = await _internalClient.request({
        url: `unimplemented/user`,
        method: "get",
        params: {},
        data: {},
      });
      return response.data;
    } catch (e) {
      if (e.response && e.response.status === 405) {
        return unimplementedMocks.user();
      }
      throw e;
    }
  },

  /**
   * UnimplementedSettings
   * Tags:
   * Docs:
   * @returns {Promise.<UnimplementedSettingsResponse>}
   */
  settings: async function () {
    checkApiClient();
    try {
      const response = await _internalClient.request({
        url: `unimplemented/settings`,
        method: "get",
        params: {},
        data: {},
      });
      return response.data;
    } catch (e) {
      if (e.response && e.response.status === 405) {
        return unimplementedMocks.settingsResponse();
      }
      throw e;
    }
  },
};

export const lbuApi = {
  /**
   * LbuStructure
   * Tags: _lbu
   * Docs: Return the full generated structure as a json object.
   * @returns {Promise.<*>}
   */
  structure: async function () {
    checkApiClient();
    const response = await _internalClient.request({
      url: `_lbu/structure.json`,
      method: "get",
      params: {},
      data: {},
    });
    return response.data;
  },
};
